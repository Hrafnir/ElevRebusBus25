<!-- Version: #26 -->
<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skolerebus!</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">

        <div class="tabs">
            <button class="tab-button active" data-tab="rebus">Rebus</button>
            <button class="tab-button" data-tab="map">Kart</button>
        </div>

        <div id="rebus-content" class="tab-content visible">

            <div id="intro-page" class="page visible">
                <h1>Skolerebus!</h1>
                <p>Velkommen! Skriv inn lagkoden deres for å starte spillet.</p>
                <input type="text" id="team-code-input" placeholder="Lagkode (f.eks. LAG1)">
                <button id="start-with-team-code-button">Start Spillet!</button>
                <div class="feedback" id="team-code-feedback"></div>
            </div>

            <div id="geofence-feedback" style="display: none; margin-top: 15px; margin-bottom:10px; padding: 10px; border-radius: 4px; text-align: center; font-weight: 500;">
                Laster posisjonsdata...
            </div>

            <div id="score-display" style="text-align: center; margin-bottom: 15px; font-size: 1.1em; display: none;">
                Poeng: <span id="current-score">0</span>
            </div>

            <!-- POST 1 (Bemannet - Minigolf) -->
            <div id="post-1-page" class="page">
                <h2 class="post-title-placeholder">Post 1: Tittel</h2>
                <div class="post-info-section">
                    <p class="post-info-placeholder">Gå til posten for instruksjoner.</p>
                </div>
                <div class="teacher-password-section" style="display: none;">
                    <h3 class="manned-post-title-placeholder">Bemannet Post: Minigolf</h3>
                    <p class="manned-post-instruction-placeholder">Lærer: Tast inn passord for å starte oppgaven.</p>
                    <input type="password" class="teacher-password-input" id="teacher-password-input-post1" placeholder="Lærerpassord">
                    <button class="submit-teacher-password-btn" data-post="1">Lås opp Oppgave</button>
                    <div class="feedback feedback-teacher-password" id="feedback-teacher-password-post1"></div>
                </div>
                <div class="minigolf-form-section" style="display: none;">
                    <h3>Minigolf Challenge!</h3>
                    <p>Spill 3 hull minigolf. Læreren noterer antall slag for hver spiller på laget (inntil 6 spillere).</p>
                    <p>Fyll inn totalt antall slag per spiller nedenfor. La felt stå tomt hvis færre enn 6 spillere.</p>
                    <div id="minigolf-player-inputs-post1" style="text-align: left; max-width: 300px; margin: 15px auto;">
                        <label for="player-1-score-post1">Spiller 1 Totalt Antall Slag:</label>
                        <input type="number" id="player-1-score-post1" min="3" style="width: 60px; margin-bottom: 5px; display: block;"><br>
                        <label for="player-2-score-post1">Spiller 2 Totalt Antall Slag:</label>
                        <input type="number" id="player-2-score-post1" min="3" style="width: 60px; margin-bottom: 5px; display: block;"><br>
                        <label for="player-3-score-post1">Spiller 3 Totalt Antall Slag:</label>
                        <input type="number" id="player-3-score-post1" min="3" style="width: 60px; margin-bottom: 5px; display: block;"><br>
                        <label for="player-4-score-post1">Spiller 4 Totalt Antall Slag:</label>
                        <input type="number" id="player-4-score-post1" min="3" style="width: 60px; margin-bottom: 5px; display: block;"><br>
                        <label for="player-5-score-post1">Spiller 5 Totalt Antall Slag:</label>
                        <input type="number" id="player-5-score-post1" min="3" style="width: 60px; margin-bottom: 5px; display: block;"><br>
                        <label for="player-6-score-post1">Spiller 6 Totalt Antall Slag:</label>
                        <input type="number" id="player-6-score-post1" min="3" style="width: 60px; margin-bottom: 5px; display: block;"><br>
                    </div>
                    <button id="submit-minigolf-post1">Registrer Golfresultater</button>
                    <div class="feedback" id="minigolf-results-feedback"></div>
                    <button id="minigolf-proceed-btn-post1" style="display: none; margin-top: 10px; background-color: #28a745;">Gå Videre til Neste Post</button> 
                </div>
                <button class="dev-reset-button">Reset Spill</button>
            </div>

            <!-- POST 2 (Vanlig oppgave) -->
            <div id="post-2-page" class="page">
                <h2 class="post-title-placeholder">Post 2: Tittel</h2>
                <div class="post-info-section">
                    <p class="post-info-placeholder">Gå til posten for å se oppgaven.</p>
                </div>
                <div class="post-task-section" style="display: none;">
                    <h3 class="post-task-title-placeholder">Oppgave for Post 2</h3>
                    <p class="post-task-question-placeholder">Her kommer spørsmålet for post 2.</p>
                    <input type="text" class="post-task-input" id="post-2-task-input" placeholder="Skriv svaret ditt her">
                    <button class="check-task-btn" data-post="2">Sjekk Svar</button>
                    <div class="feedback feedback-task" id="feedback-task-2"></div>
                    <div class="attempt-counter" id="attempts-2"></div>
                </div>
                <button class="dev-reset-button">Reset Spill</button>
            </div>

            <!-- POST 3 (Vanlig oppgave) -->
            <div id="post-3-page" class="page">
                 <h2 class="post-title-placeholder">Post 3: Tittel</h2>
                <div class="post-info-section">
                    <p class="post-info-placeholder">Gå til posten for å se oppgaven.</p>
                </div>
                <div class="post-task-section" style="display: none;">
                    <h3 class="post-task-title-placeholder">Oppgave for Post 3</h3>
                    <p class="post-task-question-placeholder">Her kommer spørsmålet for post 3.</p>
                    <input type="text" class="post-task-input" id="post-3-task-input" placeholder="Skriv svaret ditt her">
                    <button class="check-task-btn" data-post="3">Sjekk Svar</button>
                    <div class="feedback feedback-task" id="feedback-task-3"></div>
                    <div class="attempt-counter" id="attempts-3"></div>
                </div>
                <button class="dev-reset-button">Reset Spill</button>
            </div>

             <!-- POST 4 (Vanlig oppgave) -->
            <div id="post-4-page" class="page">
                <h2 class="post-title-placeholder">Post 4: Tittel</h2>
                <div class="post-info-section">
                    <p class="post-info-placeholder">Gå til posten for å se oppgaven.</p>
                </div>
                <div class="post-task-section" style="display: none;">
                    <h3 class="post-task-title-placeholder">Oppgave for Post 4</h3>
                    <p class="post-task-question-placeholder">Her kommer spørsmålet for post 4.</p>
                    <input type="text" class="post-task-input" id="post-4-task-input" placeholder="Skriv svaret ditt her">
                    <button class="check-task-btn" data-post="4">Sjekk Svar</button>
                    <div class="feedback feedback-task" id="feedback-task-4"></div>
                    <div class="attempt-counter" id="attempts-4"></div>
                </div>
                <button class="dev-reset-button">Reset Spill</button>
            </div>

            <!-- POST 5 (Vanlig oppgave) -->
            <div id="post-5-page" class="page">
                <h2 class="post-title-placeholder">Post 5: Tittel</h2>
                <div class="post-info-section">
                    <p class="post-info-placeholder">Gå til posten for å se oppgaven.</p>
                </div>
                <div class="post-task-section" style="display: none;">
                    <h3 class="post-task-title-placeholder">Oppgave for Post 5</h3>
                    <p class="post-task-question-placeholder">Her kommer spørsmålet for post 5.</p>
                    <input type="text" class="post-task-input" id="post-5-task-input" placeholder="Skriv svaret ditt her">
                    <button class="check-task-btn" data-post="5">Sjekk Svar</button>
                    <div class="feedback feedback-task" id="feedback-task-5"></div>
                    <div class="attempt-counter" id="attempts-5"></div>
                </div>
                <button class="dev-reset-button">Reset Spill</button>
            </div>

            <!-- POST 6 (Vanlig oppgave) -->
            <div id="post-6-page" class="page">
                <h2 class="post-title-placeholder">Post 6: Tittel</h2>
                <div class="post-info-section">
                    <p class="post-info-placeholder">Gå til posten for å se oppgaven.</p>
                </div>
                <div class="post-task-section" style="display: none;">
                    <h3 class="post-task-title-placeholder">Oppgave for Post 6</h3>
                    <p class="post-task-question-placeholder">Her kommer spørsmålet for post 6.</p>
                    <input type="text" class="post-task-input" id="post-6-task-input" placeholder="Skriv svaret ditt her">
                    <button class="check-task-btn" data-post="6">Sjekk Svar</button>
                    <div class="feedback feedback-task" id="feedback-task-6"></div>
                    <div class="attempt-counter" id="attempts-6"></div>
                </div>
                <button class="dev-reset-button">Reset Spill</button>
            </div>

            <!-- POST 7 (Geo-løp) -->
            <div id="post-7-page" class="page">
                <h2 class="post-title-placeholder">Post 7: Geo-Løp</h2>
                <div class="post-info-section" style="display: block;">
                    <p class="post-info-placeholder">Bruk kartet for å finne startpunktet for Geo-løpet.</p>
                </div>
                <div class="geo-run-setup-section" style="display: none;">
                    <h3>Klar for Geo-Løp!</h3>
                    <p>Du er ved startpunktet. <span class="geo-run-pre-pip-info"></span> Løpet starter om <span class="geo-run-countdown">10</span> sekunder!</p>
                    <p>Instruksjoner: Løp til Vendepunkt 2 når du hører startsignalet. Ved ankomst Vendepunkt 2, vil du høre et nytt signal. Snu og løp tilbake til Startpunkt 1. Gjenta dette til du har krysset banen 5 ganger (2.5 runder frem og tilbake).</p>
                </div>
                <div class="geo-run-active-section" style="display: none;">
                    <h3>Geo-Løp Pågår!</h3>
                    <p>Runde (kryssing): <span class="geo-run-current-lap">1</span> av 5.</p>
                    <p>Løp til: <strong class="geo-run-next-target">Vendepunkt 2 (Geo-løp)</strong>!</p>
                </div>
                <div class="geo-run-results-section" style="display: none;">
                    <h3>Geo-Løp Fullført!</h3>
                    <p>Din totale tid: <strong class="geo-run-total-time">00:00</strong></p>
                    <p>Poeng tildelt: <strong class="geo-run-points-awarded">0</strong></p>
                    <button id="geo-run-proceed-btn-post7" style="display: none; margin-top: 10px; background-color: #28a745;">Gå Videre til Neste Post</button>
                </div>
                <button class="dev-reset-button">Reset Spill</button>
            </div>

            <!-- POST 8 (Bemannet - Pyramide) -->
            <div id="post-8-page" class="page">
                <h2 class="post-title-placeholder">Post 8: Tittel</h2>
                <div class="post-info-section">
                    <p class="post-info-placeholder">Gå til posten for instruksjoner.</p>
                </div>
                <div class="teacher-password-section" style="display: none;">
                    <h3 class="manned-post-title-placeholder">Bemannet Post: Pyramide</h3>
                    <p class="manned-post-instruction-placeholder">Lærer: Tast inn passord for å starte poengregistrering.</p>
                    <input type="password" class="teacher-password-input" id="teacher-password-input-post8" placeholder="Lærerpassord">
                    <button class="submit-teacher-password-btn" data-post="8">Lås opp Poeng</button>
                    <div class="feedback feedback-teacher-password" id="feedback-teacher-password-post8"></div>
                </div>
                <div class="pyramid-points-section" style="display: none;">
                    <h3>Menneskelig Pyramide!</h3>
                    <p>Bygg den høyeste mulige pyramiden med laget! Læreren vurderer og gir poeng (0-10).</p>
                    <label for="pyramid-points-input-post8">Poeng gitt av lærer:</label>
                    <input type="number" id="pyramid-points-input-post8" min="0" max="10" style="width: 60px;">
                    <button id="submit-pyramid-points-post8">Registrer Pyramidepoeng</button>
                    <div class="feedback" id="pyramid-results-feedback"></div>
                </div>
                <button class="dev-reset-button">Reset Spill</button>
            </div>

            <!-- POST 9 (Vanlig oppgave) -->
            <div id="post-9-page" class="page">
                <h2 class="post-title-placeholder">Post 9: Tittel</h2>
                <div class="post-info-section">
                    <p class="post-info-placeholder">Gå til posten for å se oppgaven.</p>
                </div>
                <div class="post-task-section" style="display: none;">
                    <h3 class="post-task-title-placeholder">Oppgave for Post 9</h3>
                    <p class="post-task-question-placeholder">Her kommer spørsmålet for post 9.</p>
                    <input type="text" class="post-task-input" id="post-9-task-input" placeholder="Skriv svaret ditt her">
                    <button class="check-task-btn" data-post="9">Sjekk Svar</button>
                    <div class="feedback feedback-task" id="feedback-task-9"></div>
                    <div class="attempt-counter" id="attempts-9"></div>
                </div>
                <button class="dev-reset-button">Reset Spill</button>
            </div>

            <!-- POST 10 (Vanlig oppgave) -->
            <div id="post-10-page" class="page">
                 <h2 class="post-title-placeholder">Post 10: Tittel</h2>
                <div class="post-info-section">
                    <p class="post-info-placeholder">Gå til posten for å se oppgaven.</p>
                </div>
                <div class="post-task-section" style="display: none;">
                    <h3 class="post-task-title-placeholder">Oppgave for Post 10</h3>
                    <p class="post-task-question-placeholder">Her kommer spørsmålet for post 10.</p>
                    <input type="text" class="post-task-input" id="post-10-task-input" placeholder="Skriv svaret ditt her">
                    <button class="check-task-btn" data-post="10">Sjekk Svar</button>
                    <div class="feedback feedback-task" id="feedback-task-10"></div>
                    <div class="attempt-counter" id="attempts-10"></div>
                </div>
                <button class="dev-reset-button">Reset Spill</button>
            </div>

            <div id="finale-page" class="page">
                <div id="finale-info-section" style="display: none;">
                    <h1>Alle Poster Fullført!</h1>
                    <p>Bra jobbet! Nå gjenstår det bare å komme seg til målområdet på <strong>Fastland</strong>.</p>
                    <p>Kartet viser veien til mål.</p>
                </div>
                <div id="finale-unlock-section" style="display: none;">
                    <h1>Du er i Målområdet!</h1>
                    <p>Tast inn målkoden du får av læreren for å avslutte spillet og se resultatene.</p>
                    <input type="text" id="finish-unlock-input" placeholder="Skriv målkoden her" disabled>
                    <button id="finish-unlock-btn" disabled>Registrer Målgang</button>
                    <div class="feedback feedback-unlock" id="feedback-unlock-finish"></div>
                </div>
                <div id="finale-completed-section" style="display: none;">
                    <h1>Spillet er Fullført!</h1>
                    <p>Kjempebra jobba, laget! Dere er i mål!</p>
                    <h3>Resultater:</h3>
                    <p>Total Poengsum: <strong id="final-score">0</strong></p>
                    <p>Total Tid Brukt: <strong id="total-time">00:00</strong></p>
                    <h4>Etappetider:</h4>
                    <ul id="stage-times-list" style="list-style-type: none; padding-left: 0; text-align: left; max-width: 350px; margin: 10px auto;">
                    </ul>
                    <p style="margin-top: 20px;">Meld dere hos læreren på <strong>Fastland</strong>!</p>
                    <button class="dev-reset-button" style="margin-top: 30px;">Spill Igjen?</button>
                </div>
            </div>
        </div>

        <div id="map-content" class="tab-content">
            <h2>Kart over Området</h2>
            <p>Bruk kartet for å finne neste post eller målet. Lykke til!</p>
            <div id="dynamic-map-container"></div>
            <p style="font-size: 0.9em; margin-top: 15px;">(Trykk på 'Rebus'-fanen for å se oppgavene)</p>
        </div>

        <!-- NYTT: Mobil Logg Container -->
        <div id="mobile-log-container" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc; background-color: #f9f9f9; border-radius: 5px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <h4 style="margin: 0;">Debug Logg (Mobil)</h4>
                <div>
                    <button id="toggle-log-visibility" style="margin-top:0; margin-right: 5px; padding: 5px 10px; font-size:0.8em;">Vis/Skjul</button>
                    <button id="clear-mobile-log" style="margin-top:0; padding: 5px 10px; font-size:0.8em; background-color: #e74c3c;">Tøm Logg</button>
                </div>
            </div>
            <div id="mobile-log-output" style="max-height: 200px; overflow-y: auto; background-color: #fff; padding: 8px; font-size: 0.8em; text-align: left; display: none;">
                <!-- Loggmeldinger legges til her av script.js -->
            </div>
        </div>

    </div>

    <script src="script.js"></script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA5qUjSj9WyUKsZPljvHfp9RHd-dUjMblk&callback=initMap">
    </script>

</body>
</html>
<!-- Version: #26 -->
